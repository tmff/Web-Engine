<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Final Year Project</title>
    <style>
        canvas {
            background-color: black;
        }
    </style>
</head>

<body id="wasm-example">
    <script type="module">
        import init from "./pkg/final_year_project.js";

        let loadedFiles = [];

        window.LoadApp = function (){
            init().then(() => {
                console.log("WASM Loaded");
            });
        }

        document.getElementById('fileInput').addEventListener('change', function(event) {
            const files = event.target.files;
            for (let i = 0; i < files.length; i++) {
                const reader = new FileReader();
                reader.onload = (function(file) {
                    return function(e) {
                        // Store file content in an array or similar structure
                        loadedFiles.push({
                            name: file.name,
                            type: file.type,
                            size: file.size,
                            content: new Uint8Array(e.target.result)
                        });
                    };
                })(files[i]);
                reader.readAsArrayBuffer(files[i]);
            }
        });

    </script>
    <input type="file" id="fileInput" multiple>
    <button onclick="LoadApp()">Load App</button>
</body>

</html>
